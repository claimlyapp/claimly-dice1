<!DOCTYPE html>
<html>
<head>
    <title>üöÄ CLAIMLY DICE v2.0 - LEVEL UP! üé≤</title>
    <meta name="viewport" content="width=device-width">
    <style>
        *{margin:0;padding:0;box-sizing:border-box;}
        body{
            font-family:'Courier New',monospace;
            background:linear-gradient(45deg,#000011,#220044,#000011);
            background-size:400% 400%;
            animation:neonPulse 4s ease infinite;
            color:#0ff;
            min-height:100vh;
            overflow-x:hidden;
        }
        @keyframes neonPulse{0%,100%{background-position:0% 50%;}50%{background-position:100% 50%;}}
        .dashboard{
            max-width:650px;margin:20px auto;padding:40px;
            background:linear-gradient(145deg,rgba(0,10,30,0.97),rgba(0,0,0,0.95));
            border:4px solid transparent;border-radius:24px;
            background-clip:padding-box;box-shadow:0 0 120px rgba(0,255,255,0.06);
            text-align:center;position:relative;backdrop-filter:blur(8px);
        }
        .logo{font-size:36px;margin-bottom:12px;color:#fff;text-shadow:0 0 24px rgba(0,255,255,0.12);}

        /* DICE - chameleon color scheme */
        #dice{
            width:260px;height:260px;margin:20px auto;
            background:linear-gradient(145deg,#0b6623,#2e8b57,#4b0082);
            border-radius:28px;display:flex;align-items:center;justify-content:center;
            font-size:90px;box-shadow:0 0 60px rgba(0,0,0,0.6), inset 0 0 30px rgba(0,0,0,0.6);
            cursor:crosshair;transition:all 0.5s;position:relative;overflow:hidden;color:#fff;
        }
        #dice::before{
            content:'';position:absolute;top:-2px;left:-2px;right:-2px;bottom:-2px;
            background:linear-gradient(45deg,#7FFF00,#00FA9A,#00CED1,#8A2BE2);
            border-radius:30px;z-index:-1;opacity:0;transition:opacity 0.3s;
        }
        /* glowing chameleon effect on wins */
        #dice.win::before{opacity:1;animation:chameleon 2s infinite linear;}
        @keyframes chameleon{
            0%{filter:hue-rotate(0deg) brightness(1);}25%{filter:hue-rotate(60deg) brightness(1.08);}50%{filter:hue-rotate(120deg) brightness(1.12);}75%{filter:hue-rotate(180deg) brightness(1.08);}100%{filter:hue-rotate(240deg) brightness(1);}
        }
        #dice.win{
            animation:explode 0.9s ease-out, glow 1.6s infinite alternate;
            box-shadow:0 0 120px rgba(122,255,122,0.9), 0 0 200px rgba(34,255,200,0.6);
            transform:scale(1.05);
        }
        @keyframes explode{0%{transform:scale(1) rotate(0deg);}40%{transform:scale(1.4) rotate(180deg);}100%{transform:scale(1) rotate(360deg);}}
        @keyframes glow{0%{box-shadow:0 0 20px rgba(122,255,122,0.4);}100%{box-shadow:0 0 140px rgba(122,255,122,0.95),0 0 240px rgba(34,255,200,0.85);}}

        input[type=range]{width:280px;height:12px;background:#222;outline:none;border-radius:15px;margin:20px;}
        input[type=range]::-webkit-slider-thumb{height:30px;width:30px;background:linear-gradient(#7FFF00,#00FA9A);border-radius:50%;cursor:pointer;box-shadow:0 0 25px rgba(0,255,170,0.4);}

        #result{font-size:28px;font-weight:bold;margin:20px 0;min-height:56px;text-shadow:0 0 10px currentColor;}

        button{
            background:linear-gradient(45deg,#7FFF00,#00CED1);color:#000;border:none;padding:12px 26px;font-size:18px;
            font-weight:700;border-radius:18px;cursor:pointer;margin:8px;box-shadow:0 10px 30px rgba(0,255,170,0.12);transition:all 0.25s;
        }
        button:hover{transform:translateY(-3px) scale(1.03);box-shadow:0 20px 50px rgba(0,255,170,0.16);}
        .add-money{background:linear-gradient(45deg,#ffd700,#ff8c00);color:#000;font-size:18px;padding:12px 18px;border-radius:18px;}

        .stats{display:flex;justify-content:space-around;flex-wrap:wrap;gap:12px;margin:20px 0;}
        .stat-badge{background:rgba(255,255,255,0.03);padding:10px 14px;border-radius:18px;border:2px solid rgba(255,255,255,0.04);font-weight:bold;color:#cfc;}
        .hot-streak-badge{animation:fire 0.6s infinite alternate;color:#fffbf0;}
        @keyframes fire{0%{box-shadow:0 0 8px #7fff00;}100%{box-shadow:0 0 24px #00e6b8;}}

        @media(max-width:600px){.dashboard{padding:22px;font-size:14px;}#dice{width:200px;height:200px;font-size:64px;}button{padding:10px 18px;font-size:16px;}}
    </style>
</head>
<body>
    <div class="dashboard">
        <div class="logo">üé≤ CLAIMLY DICE PRO</div>
        <div class="profile-bar" style="display:flex;justify-content:space-between;align-items:center;margin-bottom:14px;">
            <div style="text-align:left;">
                üèÖ <span id="level">1</span>
                <div class="level-bar" style="display:inline-block;width:120px;height:8px;background:#333;border-radius:4px;overflow:hidden;margin-left:8px;vertical-align:middle;"><div class="level-fill" id="levelFill" style="background:linear-gradient(90deg,#7FFF00,#00CED1);height:100%;width:20%;transition:width 0.5s;"></div></div>
                <span id="xp" style="margin-left:8px;color:#cfc;">150/1000</span>
            </div>
            <div style="font-size:18px;color:#fff;">üë§ <span id="username">Gamer</span></div>
        </div>

        <div class="balance-grid" style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;margin-bottom:18px;">
            <div class="stat-card" style="padding:12px;background:rgba(0,255,170,0.04);border-radius:12px;">üí∞ $<span id="balance">500</span></div>
            <div class="stat-card" style="padding:12px;background:rgba(0,255,170,0.04);border-radius:12px;">üéØ Bet $<span id="bet">50</span></div>
            <div class="stat-card" style="padding:12px;background:rgba(0,255,170,0.04);border-radius:12px;">üî• <span id="streak">0</span></div>
        </div>

        <div id="dice">‚öÄ ‚öÄ</div>
        <div style="margin:12px 0;">Bet: $<input type="range" id="betSlider" min="10" max="200" value="50"></div>

        <div>
            <button id="rollBtn" onclick="roll()">üé≤ Roll Dice</button>
            <button class="add-money" onclick="addMoney()">üíé +</button>
            <button onclick="upgradeProfile()">‚≠ê UPGRADE PROFILE</button>
        </div>

        <div id="result"></div>

        <div class="stats">
            <div class="stat-badge">üèÜ Wins: <span id="wins">0</span></div>
            <div class="stat-badge hot-streak-badge" id="hotStreak" style="display:none;">üî• HOT STREAK!</div>
            <div class="stat-badge">‚≠ê Level <span id="levelDisplay">1</span></div>
        </div>
    </div>

    <script>
        // --- Game State ---
        let gameData = JSON.parse(localStorage.getItem('claimlyDice')) || {
            balance: 500, wins: 0, streak: 0, maxStreak: 0, level: 1,
            xp: 150, xpToNext: 1000, username: 'Gamer', totalRolls: 0
        };

        let {balance, wins, streak, maxStreak, level, xp, xpToNext, username, totalRolls} = gameData;

        // DOM Elements
        const els = {
            balance: document.getElementById('balance'),
            bet: document.getElementById('bet'), wins: document.getElementById('wins'),
            streak: document.getElementById('streak'), level: document.getElementById('level'),
            levelFill: document.getElementById('levelFill'), levelDisplay: document.getElementById('levelDisplay'),
            xp: document.getElementById('xp'), username: document.getElementById('username'),
            result: document.getElementById('result'), dice: document.getElementById('dice'),
            hotStreak: document.getElementById('hotStreak'), betSlider: document.getElementById('betSlider')
        };

        function updateDisplay(){
            els.balance.textContent = balance;
            els.bet.textContent = els.betSlider.value;
            els.wins.textContent = wins;
            els.streak.textContent = streak;
            els.level.textContent = level;
            els.levelDisplay.textContent = level;
            els.xp.textContent = `${xp}/${xpToNext}`;
            els.username.textContent = username;
            els.levelFill.style.width = `${(xp / xpToNext) * 100}%`;
            els.hotStreak.style.display = streak >= 3 ? 'inline-block' : 'none';
            saveGame();
        }

        els.betSlider.oninput = e => els.bet.textContent = e.target.value;

        function saveGame() {
            gameData = {balance, wins, streak, maxStreak, level, xp, xpToNext, username, totalRolls};
            localStorage.setItem('claimlyDice', JSON.stringify(gameData));
        }

        // Secure random integer in [min, max] using window.crypto
        function secureRandomInt(min, max) {
            const range = max - min + 1;
            if (range <= 0) return min;
            const maxUint32 = 0xFFFFFFFF;
            const safeMax = Math.floor(maxUint32 / range) * range - 1;
            let rand;
            do {
                const arr = new Uint32Array(1);
                window.crypto.getRandomValues(arr);
                rand = arr[0] & maxUint32;
            } while (rand > safeMax);
            return min + (rand % range);
        }

        const DIE_EMOJI = ['‚öÄ','‚öÅ','‚öÇ','‚öÉ','‚öÑ','‚öÖ'];
        function dieEmoji(n){ return DIE_EMOJI[n-1] || '‚öÄ'; }

        function roll() {
            const bet = parseInt(els.betSlider.value, 10);
            if (balance < bet) {
                els.result.innerHTML = '<span style="color:#f66;font-size:20px;">‚ùå INSUFFICIENT FUNDS</span>';
                return;
            }

            // Deduct bet and increment roll count
            balance -= bet; totalRolls++;

            // Secure dice
            const d1 = secureRandomInt(1,6);
            const d2 = secureRandomInt(1,6);
            const total = d1 + d2;
            const diceEl = els.dice;

            // Roll animation (visual only)
            diceEl.style.transform = 'rotateY(720deg) scale(1.2)';
            diceEl.classList.remove('win');
            els.result.innerHTML = '<span style="color:#ccc;font-size:20px;">Rolling...</span>';

            setTimeout(() => {
                // Show dice
                diceEl.textContent = `${dieEmoji(d1)} ${dieEmoji(d2)}`;
                diceEl.style.transform = 'scale(1.05)';

                // Win condition: traditional simple 7 or 11
                if (total === 7 || total === 11) {
                    const winAmount = bet * 2; // 2x payout
                    balance += winAmount;
                    wins++;

                    // consecutive win logic
                    streak = (streak >= 0) ? streak + 1 : 1;
                    if (streak > maxStreak) maxStreak = streak;

                    // XP and level
                    xp += 100;
                    if (xp >= xpToNext) {
                        level++;
                        xp = xp - xpToNext;
                        xpToNext = Math.floor(xpToNext * 1.5);
                        els.result.innerHTML = `<span style="color:lime;font-size:22px;">üéâ LEVEL UP! +${winAmount} XP & ${bet}$</span>`;
                    } else {
                        els.result.innerHTML = `<span style="color:gold;font-size:22px;">üéâ ${total} - YOU WIN! +$${winAmount}</span>`;
                    }

                    // Visuals for win
                    diceEl.classList.add('win');
                    if (navigator.vibrate) navigator.vibrate([150,80,150]);
                    chameleonConfetti();
                } else {
                    // Loss
                    streak = 0;
                    els.result.innerHTML = `<span style="color:#f66;font-size:20px;">üí• BUST: ${total}</span>`;
                    diceEl.classList.remove('win');
                    if (navigator.vibrate) navigator.vibrate(100);
                }

                updateDisplay();
                // Remove win class after animation
                setTimeout(() => diceEl.classList.remove('win'), 2600);
            }, 650);
        }

        function addMoney(){ balance += 1000; updateDisplay(); }
        function upgradeProfile(){ level += 1; xp = 0; xpToNext = Math.floor(xpToNext * 1.3); updateDisplay(); }

        // Simple confetti animation for wins
        function chameleonConfetti(){
            for (let i=0;i<36;i++){
                setTimeout(()=>{
                    const conf = document.createElement('div');
                    conf.textContent = '‚ú®';
                    conf.style.position = 'fixed';
                    conf.style.left = (50 + (Math.random()*40-20)) + '%';
                    conf.style.top = (10 + Math.random()*30) + 'px';
                    conf.style.fontSize = (12 + Math.random()*24) + 'px';
                    conf.style.pointerEvents = 'none';
                    conf.style.transform = `translateY(0) rotate(${Math.random()*360}deg)`;
                    conf.style.opacity = '0.95';
                    conf.style.transition = 'transform 2.5s linear, opacity 2.5s linear';
                    conf.style.color = ['#7FFF00','#00FA9A','#00CED1','#8A2BE2'][Math.floor(Math.random()*4)];
                    document.body.appendChild(conf);
                    requestAnimationFrame(()=>{
                        conf.style.transform = `translateY(${100 + Math.random()*100}vh) rotate(${Math.random()*1080}deg)`;
                        conf.style.opacity = '0';
                    });
                    setTimeout(()=>conf.remove(), 2600);
                }, i*18);
            }
        }

        // Inject a few extra keyframes safely
        (function injectKeyframes(){
            const style = document.createElement('style');
            style.textContent = `@keyframes fall{to{transform:translateY(100vh) rotate(1080deg);opacity:0;}} @keyframes pulse{0%,100%{transform:scale(1);}50%{transform:scale(1.06);}}`;
            document.head.appendChild(style);
        })();

        // Initialize
        updateDisplay();
    </script>
</body>
</html>